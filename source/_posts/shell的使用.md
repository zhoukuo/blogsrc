---
title: shell的使用
date: 2016-08-24 22:25:08
tags: unix
---
shell是对用户提出的运行程序的请求进行解释的程序。对大多数UNIX用户而言，shell是系统中最重要的程序。除了使用文本编辑器以外，用户大部分时间都在shell中工作。一旦学会使用shell，就可以不必求助于传统语言编程，而解决很多复杂的问题。
<!--more-->

## 文件名简写
假如一本书中的每章拆分成节，建成如下文件：
ch1.1
ch1.2
ch1.3
...
如果打印整本书，那么该怎么办呢？可以执行
```bash
$ pr ch1.1 ch1.2 ch1.3 ...
```
但这样很快就使人厌烦，而且容易出现错误。这就是要使用文件名简写的原因。如果键入：
```bash
$ pr ch*
```
shell认为\*的含义是“任何字符串”，所以ch*是一个匹配当前目录中得所有以ch开头的文件的一个模式。关键之处在于，文件名简写并不是pr命令的特性，而是shell的一项服务。所以你可以用它为任何命令生成文件名序列。

\*不是shell提供的唯一匹配模式，尽管它被频繁的使用。模式[...]匹配括号内的任何字符。
```bash
$ pr ch [12346789] *		# 打印1、2、3、4、6、7、8、9章，但没有第5章
$ pr ch [1-46-9]			# 同上
```

?模式匹配任何单个字符：
```bash
$ ls ?		# 列出单个字符的文件
$ ls ch?.1	# 列出ch1.1、ch2.1、ch3.1等等，但没有ch10.1
```
注意模式只匹配已存在的文件。不能用模式建立新文件。

模式字符如\*之类既可用于单个文件名也用于路径名。
```bash
$ usr/mary/*		# 匹配mary目录下所有文件
```
如果想让模式字符作为普通字符使用，可以再特殊字符前加上一个反斜杠：
```bash
$ ls \?
```

## I/O重定向


## 命令行结构

最简单的命令就是一个字(word)，通常是一个可执行的文件名。

```bash
mbp:blog zhoukuo$ who
zhoukuo  console  Aug 23 21:25 
zhoukuo  ttys000  Aug 23 21:25 
```

一条命令通常以换行结束，但有时分号；也可用作命令结束符：

```bash
mbp:blog zhoukuo$ date; who
2016年 8月23日 星期二 22时34分26秒 CST
zhoukuo  console  Aug 23 21:25 
zhoukuo  ttys000  Aug 23 21:25 
```
可以将date;who的输出送到一个管道：

```bash
mbp:blog zhoukuo$ (date;who)|wc
       3      15     112
```
date和who的输出被串连成单个数据流，送入一个管道。

